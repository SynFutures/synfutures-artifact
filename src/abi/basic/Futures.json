[
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "wadAmount",
        "type": "int256"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "balance",
        "type": "int256"
      }
    ],
    "name": "Deposit",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "liquidator",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "size",
        "type": "int256"
      }
    ],
    "name": "Liquidate",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "totalAccounts",
        "type": "uint256"
      }
    ],
    "name": "NewAccount",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "size",
        "type": "int256"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "pnl",
        "type": "int256"
      }
    ],
    "name": "Settle",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "enum Types.Side",
        "name": "side",
        "type": "uint8"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "size",
        "type": "uint256"
      }
    ],
    "name": "Trade",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "wadAmount",
        "type": "int256"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "balanceFrom",
        "type": "int256"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "balanceTo",
        "type": "int256"
      }
    ],
    "name": "TransferBalance",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "balance",
        "type": "int256"
      }
    ],
    "name": "UpdateAccountBalance",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "components": [
          {
            "internalType": "int128",
            "name": "balance",
            "type": "int128"
          },
          {
            "internalType": "int128",
            "name": "position",
            "type": "int128"
          },
          {
            "internalType": "uint128",
            "name": "entryNotional",
            "type": "uint128"
          },
          {
            "internalType": "int128",
            "name": "entrySocialLoss",
            "type": "int128"
          }
        ],
        "indexed": false,
        "internalType": "struct Types.Account",
        "name": "account",
        "type": "tuple"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "openInterests",
        "type": "uint256"
      }
    ],
    "name": "UpdateAmmAccount",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "int256",
        "name": "newVal",
        "type": "int256"
      }
    ],
    "name": "UpdateInsuranceFund",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "enum Types.Side",
        "name": "side",
        "type": "uint8"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "newVal",
        "type": "int256"
      }
    ],
    "name": "UpdateSocialLoss",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "components": [
          {
            "internalType": "int128",
            "name": "balance",
            "type": "int128"
          },
          {
            "internalType": "int128",
            "name": "position",
            "type": "int128"
          },
          {
            "internalType": "uint128",
            "name": "entryNotional",
            "type": "uint128"
          },
          {
            "internalType": "int128",
            "name": "entrySocialLoss",
            "type": "int128"
          }
        ],
        "indexed": false,
        "internalType": "struct Types.Account",
        "name": "account",
        "type": "tuple"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "UpdateTraderAccount",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "wadAmount",
        "type": "int256"
      },
      {
        "indexed": false,
        "internalType": "int256",
        "name": "balance",
        "type": "int256"
      }
    ],
    "name": "Withdraw",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "accountList",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "accounts",
    "outputs": [
      {
        "internalType": "int128",
        "name": "balance",
        "type": "int128"
      },
      {
        "internalType": "int128",
        "name": "position",
        "type": "int128"
      },
      {
        "internalType": "uint128",
        "name": "entryNotional",
        "type": "uint128"
      },
      {
        "internalType": "int128",
        "name": "entrySocialLoss",
        "type": "int128"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "ammProxy",
    "outputs": [
      {
        "internalType": "contract IAmm",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "calculateLiquidationSize",
    "outputs": [
      {
        "internalType": "enum Types.Side",
        "name": "",
        "type": "uint8"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IGlobalConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      }
    ],
    "name": "getAccount",
    "outputs": [
      {
        "components": [
          {
            "internalType": "int128",
            "name": "balance",
            "type": "int128"
          },
          {
            "internalType": "int128",
            "name": "position",
            "type": "int128"
          },
          {
            "internalType": "uint128",
            "name": "entryNotional",
            "type": "uint128"
          },
          {
            "internalType": "int128",
            "name": "entrySocialLoss",
            "type": "int128"
          }
        ],
        "internalType": "struct Types.Account",
        "name": "",
        "type": "tuple"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "internalType": "enum Types.Side",
        "name": "side",
        "type": "uint8"
      }
    ],
    "name": "handleLiquidationLossByAmm",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "insuranceFundBalance",
    "outputs": [
      {
        "internalType": "int256",
        "name": "",
        "type": "int256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "isUser",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "margin",
    "outputs": [
      {
        "internalType": "contract IERC20",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "openInterests",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "scaler",
    "outputs": [
      {
        "internalType": "int256",
        "name": "",
        "type": "int256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "enum Types.Side",
        "name": "side",
        "type": "uint8"
      }
    ],
    "name": "socialLossPerContract",
    "outputs": [
      {
        "internalType": "int256",
        "name": "",
        "type": "int256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "socialLossPerContracts",
    "outputs": [
      {
        "internalType": "int256",
        "name": "",
        "type": "int256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalAccounts",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "_margin",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "_marginDecimals",
        "type": "uint256"
      }
    ],
    "name": "initialize",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_amm",
        "type": "address"
      }
    ],
    "name": "setAmm",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "wadAmount",
        "type": "uint256"
      }
    ],
    "name": "depositToInsuranceFund",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "wadAmount",
        "type": "uint256"
      }
    ],
    "name": "withdrawFromInsuranceFund",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      }
    ],
    "name": "inspectAccount",
    "outputs": [
      {
        "components": [
          {
            "internalType": "uint256",
            "name": "positionMargin",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "maintenanceMargin",
            "type": "uint256"
          },
          {
            "internalType": "int256",
            "name": "pnl",
            "type": "int256"
          },
          {
            "internalType": "int256",
            "name": "marginBalance",
            "type": "int256"
          },
          {
            "internalType": "int256",
            "name": "availableMargin",
            "type": "int256"
          },
          {
            "internalType": "bool",
            "name": "isSafe",
            "type": "bool"
          },
          {
            "internalType": "bool",
            "name": "isIMSafe",
            "type": "bool"
          },
          {
            "internalType": "bool",
            "name": "isBankrupt",
            "type": "bool"
          }
        ],
        "internalType": "struct Types.AccountState",
        "name": "state",
        "type": "tuple"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "ammXY",
    "outputs": [
      {
        "components": [
          {
            "internalType": "uint256",
            "name": "x",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "y",
            "type": "uint256"
          }
        ],
        "internalType": "struct Types.XY",
        "name": "xy",
        "type": "tuple"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "isIMSafeWithPrice",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "isMMSafeWithPrice",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "liquidator",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "markPrice",
        "type": "uint256"
      },
      {
        "components": [
          {
            "internalType": "uint32",
            "name": "emaTimeConstant",
            "type": "uint32"
          },
          {
            "internalType": "uint16",
            "name": "poolFeeRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "poolReserveFeeRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxPriceSlippageRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxInitialDailyBasis",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxUserTradeOpenInterestRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "minAmmOpenInterestRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxSpotIndexChangePerSecondRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "initialMarginRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maintenanceMarginRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "bankruptcyLiquidatorRewardRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "insurancePremiumRatio",
            "type": "uint16"
          }
        ],
        "internalType": "struct Types.Param",
        "name": "param",
        "type": "tuple"
      }
    ],
    "name": "liquidateFor",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "int256",
        "name": "",
        "type": "int256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "internalType": "bool",
        "name": "buy",
        "type": "bool"
      },
      {
        "internalType": "uint256",
        "name": "initBlockPrice",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "size",
        "type": "uint256"
      },
      {
        "internalType": "bool",
        "name": "normal",
        "type": "bool"
      },
      {
        "components": [
          {
            "internalType": "uint32",
            "name": "emaTimeConstant",
            "type": "uint32"
          },
          {
            "internalType": "uint16",
            "name": "poolFeeRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "poolReserveFeeRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxPriceSlippageRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxInitialDailyBasis",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxUserTradeOpenInterestRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "minAmmOpenInterestRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxSpotIndexChangePerSecondRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "initialMarginRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maintenanceMarginRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "bankruptcyLiquidatorRewardRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "insurancePremiumRatio",
            "type": "uint16"
          }
        ],
        "internalType": "struct Types.Param",
        "name": "param",
        "type": "tuple"
      }
    ],
    "name": "tradeFor",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "internalType": "enum Types.Side",
        "name": "side",
        "type": "uint8"
      },
      {
        "internalType": "uint256",
        "name": "ammPrice",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "size",
        "type": "uint256"
      },
      {
        "internalType": "bool",
        "name": "toAmm",
        "type": "bool"
      }
    ],
    "name": "tradeWithMarginFor",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "transferAccountBalance",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "wadAmount",
        "type": "uint256"
      }
    ],
    "name": "deposit",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "wadAmount",
        "type": "uint256"
      }
    ],
    "name": "depositFor",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "wadAmount",
        "type": "uint256"
      }
    ],
    "name": "withdraw",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "settle",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "settleAmmAndReserveAccount",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "trader",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "opened",
        "type": "uint256"
      },
      {
        "components": [
          {
            "internalType": "uint32",
            "name": "emaTimeConstant",
            "type": "uint32"
          },
          {
            "internalType": "uint16",
            "name": "poolFeeRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "poolReserveFeeRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxPriceSlippageRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxInitialDailyBasis",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxUserTradeOpenInterestRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "minAmmOpenInterestRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maxSpotIndexChangePerSecondRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "initialMarginRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "maintenanceMarginRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "bankruptcyLiquidatorRewardRatio",
            "type": "uint16"
          },
          {
            "internalType": "uint16",
            "name": "insurancePremiumRatio",
            "type": "uint16"
          }
        ],
        "internalType": "struct Types.Param",
        "name": "param",
        "type": "tuple"
      },
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "isSafeAfterTrade",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  }
]
